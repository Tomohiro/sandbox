#!/usr/bin/env ruby
# encoding: utf-8

require 'zootool_mixi'

zootool = Pit.get('zootool.com')
today  = ZootoolMixi::Bookmark.user(zootool[:user]).today

mixi = Pit.get('mixi.jp')
diary = MixiDiary.agent(:email => mixi[:email], :password => mixi[:password])
diary.title = "[Bookmarks] #{today.shuffle.sample(2).collect { |i| i.title }.join ', '}"

body = "Bookmarks at #{Date.today}\n"
today.each do |i|
  body += "\n #{i.tags.join ', '}"
  body += "\n　#{i.title}"
  body += "\n　　#{i.url}\n"
end
body += "\n\n--\nPosted from mixi_diary: https://github.com/Tomohiro/mixi_diary"

diary.body = body

puts diary.inspect
#diary.post
